# 学生成绩管理系统 — 新阶段需求与设计方案（总纲）

> 基于项目：https://github.com/liqunhua4413/studentms
> 结合根目录 Doc 中既有说明，并融合本次新增 16 条需求，用于后续 Cursor @ 文档自动开发。

---

## 一、项目目标

在原有 studentms 项目的基础上，升级为：
- 面向【学生 / 教师 / 院长 / 管理员】四类角色
- 支持【课程管理、批量基础数据导入、批量成绩单导入、成绩查询与权限控制、批量试卷分析管理】
- 建立统一、规范、可长期扩展的【数据库结构 + 权限模型 + 文档体系】

---

## 二、角色与权限设计

### 1. 用户类型

| 角色 | 说明 | 核心权限 |
|------|------|----------|
管理员(admin) | 系统最高权限 | 账号管理、学院/专业/课程设置、成绩修改、试卷分析修改、数据清空、初始化导入 |
教师(teacher) | 任课教师 | 上传成绩单、查询成绩、上传试卷分析、查看试卷分析 |
院长(dean) | 每个学院 1 个 | 查看本学院全部课程/成绩、代老师上传成绩、上传/查看试卷分析 |
学生(student) | 在校学生 | 查询个人成绩、查询课表 |

### 2. 权限核心规则

- 成绩修改：❌教师 / ❌院长 / 管理员
- 成绩上传：教师 / 院长 / 管理员
- 课程开设：仅管理员
- 试卷分析修改：仅管理员
- 数据初始化 / 清空测试数据：仅管理员

---

## 三、数据库设计调整（核心）

### 1. 命名规范

- 所有表名、字段名使用完整单词：
  - course / student / teacher / department / major / class / score / exam_paper_analysis
- 主键统一：id
- 外键统一：xxx_id

### 2. 课程表示例（替代原 c 表）

course（课程表）
- id
- course_name
- credit  COMMENT '学分'
- major_id COMMENT '专业ID'
- department_id COMMENT '学院ID'

后续所有字段必须补充 COMMENT。

---

## 四、基础数据批量管理

### 1. 批量导入模块（管理员）

需统一实现：
- 学生批量导入（Excel）
- 教师批量导入（Excel）
- 学院 / 专业 / 班级 / 课程批量导入

页面必须提供：
- 模板下载
- 文件上传
- 导入预览
- 失败提示

---

## 五、学号与教师编号规范

- 学生：student_no（学号，唯一，业务主键）
- 教师：teacher_no（教师工号，唯一）

初始化阶段：系统生成规则编号。
后期支持管理员批量导入真实编号。

---

## 六、成绩单批量导入设计（核心重点）

### 1. 文件要求

- 支持：多文件批量上传
- 格式：固定 Excel 成绩单模板

### 2. Excel 内容解析规则

第 2 行：课程元信息
- 课程名称
- 课程类别
- 课程性质
- 考核方式
- 任课教师

第 3 行：教学信息
- 开课学期（统一格式）
- 学分
- 学时
- 开课班级（必须 2X级 / 3X级 开头）
- 年级（从班级中提取）

第 4 行：表头
- A-G 为第一个学生
- H-N 为第二个学生

第 5-73 行：学生数据
- 非数字成绩 → NULL
- 第 43-45 行跳过

### 3. 成绩入库结构

- 学生表
- 课程表
- 开课表（course_open）
- 成绩表（score）
- 成绩单表（score_import_record）

---

## 七、试卷分析管理

- 模块名称：试卷分析
- 支持 Word 批量上传
- 教师 / 院长：上传 + 查看
- 管理员：上传 + 查看 + 修改 + 删除

---

## 八、课程管理规则

- 管理员：创建课程 + 指派教师 + 指定学院/专业/班级
- 教师：仅查看本人课程
- 院长：查看本学院全部课程

###  课程管理必须支持【批量导入】

课程管理模块中，管理员需要具备：
- 单个新增课程
- Excel 批量导入课程

批量导入课程需支持字段：
- 课程名称
- 学分
- 所属学院
- 所属专业
- 可开设班级
- 可授课教师

页面必须提供：
-  批量导入模板下载
-  批量上传
-  导入结果提示（成功 / 失败 / 重复）

并支持：
- 批量导入后，直接建立【课程-学院-专业-教师】的关联关系。

---


## 九、账号与初始化体系

### 1. 初始账号

- admin：1 个
- 院长：5 个（绑定学院）
- 教师：5 个
- 学生：5 个
- 密码统一：123456

### 2. 必须提供功能

- 一键清除测试数据
- 按模板重新导入基础数据

---

## 十、用户归属结构

所有账号必须绑定：
- 学院
- 专业
- 班级（教师可为空）

---

## 十一、界面与系统信息修改

系统底部信息统一改为：

- liqunhua
- 邯郸应用技术职业学院
- QQ：2361271255
- 标语：立德树人，知行合一

---

## 十二、最终文档体系要求（开发完成后）

删除 Doc 下旧文档，仅保留：

1. 《系统使用说明》
2. 《系统设计方案文档》
3. 《系统开发部署说明书》

---

## 十三、开发执行顺序建议（给 Cursor 用）

1. 数据库重构
2. 权限模型改造
3. 批量导入模块
4. 成绩单解析模块
5. 试卷分析模块
6. 课程管理模块
7. 初始化与清空模块
8. 前端角色改造
9. 文档输出模块

---

## 十四、Cursor 使用方式

在 Cursor 中：

@Doc-需求与设计方案-总纲

作为全局规则文档，逐模块生成代码。

---

（本文档是总设计蓝图，后续每个模块可再拆分子文档）

